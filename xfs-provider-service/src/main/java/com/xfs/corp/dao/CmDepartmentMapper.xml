<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="BD_DEPARTMENT" >
    <!-- Result Map-->
    <resultMap id="result_map_BD_DEPARTMENT" type="com.xfs.corp.model.CmDepartment" >
        <result column="dep_id" property="depId"/>
        <result column="dep_name" property="depName"/>
        <result column="org_id" property="orgId"/>
        <result column="parent_id" property="parentId"/>
        <result column="dr" property="dr"/>
        <result column="create_dt" property="createDt"/>
        <result column="create_by" property="createBy"/>
        <result column="modify_dt" property="modifyDt"/>
        <result column="modify_by" property="modifyBy"/>
    </resultMap>

    <!-- bd_department table all fields -->
    <sql id="Base_Column_List" >
        dep_id,dep_name,org_id,parent_id,dr,create_dt,create_by,modify_dt,modify_by
    </sql>

    <!-- 查询条件 -->
    <sql id="Example_Where_Clause">
        <trim prefix=" WHERE " prefixOverrides="AND ">
            <if test="depId != null" >and dep_id = #{depId}</if>
            <if test="depName != null" >and dep_name = #{depName}</if>
            <if test="orgId != null" >and org_id = #{orgId}</if>
            <if test="parentId != null" >and parent_id = #{parentId}</if>
            <if test="dr != null" >and dr = #{dr}</if>
            <if test="createDt != null" >and create_dt = #{createDt}</if>
            <if test="createBy != null" >and create_by = #{createBy}</if>
            <if test="modifyDt != null" >and modify_dt = #{modifyDt}</if>
            <if test="modifyBy != null" >and modify_by = #{modifyBy}</if>
        </trim>
    </sql>

    <!-- 查询条件 带模糊查询 以及 时间起始查询 -->
    <sql id="Example_Where_Clause2">
        <trim prefix=" WHERE " prefixOverrides="AND ">
            <if test="depId != null">AND dep_id = '${depId}'</if>
            <if test="depName != null">AND dep_name like '%${depName}%'</if>
            <if test="depNameEq != null">AND dep_name = #{depNameEq}</if>
            <if test="orgId != null">AND org_id = '${orgId}'</if>
            <if test="parentId != null">AND parent_id = '${parentId}'</if>
            <if test="dr != null">AND dr = '${dr}'</if>
            <if test="createDt != null">AND create_dt = #{createDt}</if>
            <if test="createDtFrom != null">AND create_dt&gt;=#{createDtFrom}</if>
            <if test="createDtTo != null">AND create_dt&lt;=#{createDtTo}</if>
            <if test="createBy != null">AND create_by = '%${createBy}%'</if>
            <if test="modifyDt != null">AND modify_dt like '%${modifyDt}%'</if>
            <if test="modifyBy != null">AND modify_by = '%${modifyBy}%'</if>
        </trim>
    </sql>

    <!-- 插入记录 -->
    <insert id="InsertBD_DEPARTMENT" parameterType="Object" >
        INSERT INTO CM_DEPARTMENT (
        <trim prefix=" " prefixOverrides=",">
            <if test="depId != null ">,dep_id</if>
            <if test="depName != null ">,dep_name</if>
            <if test="orgId != null ">,org_id</if>
            <if test="parentId != null ">,parent_id</if>
            <if test="dr != null ">,dr</if>
            <if test="createDt != null ">,create_dt</if>
            <if test="createBy != null ">,create_by</if>
            <if test="modifyDt != null ">,modify_dt</if>
            <if test="modifyBy != null ">,modify_by</if>
        </trim>
        )  VALUES (
        <trim prefix=" " prefixOverrides=",">
            <if test="depId != null ">,#{depId}</if>
            <if test="depName != null ">,#{depName}</if>
            <if test="orgId != null ">,#{orgId}</if>
            <if test="parentId != null ">,#{parentId}</if>
            <if test="dr != null ">,#{dr}</if>
            <if test="createDt != null ">,#{createDt}</if>
            <if test="createBy != null ">,#{createBy}</if>
            <if test="modifyDt != null ">,#{modifyDt}</if>
            <if test="modifyBy != null ">,#{modifyBy}</if>
        </trim>
        )
        <selectKey resultType="java.lang.Integer" order="AFTER" keyProperty="depId">
            SELECT LAST_INSERT_ID() AS DEP_ID
        </selectKey>
    </insert>

    <!-- 根据id，修改记录-->
    <update id="UpdateBD_DEPARTMENT" parameterType="Object" >
        UPDATE CM_DEPARTMENT
        <trim prefix=" SET " prefixOverrides=",">
            <if test="depId != null ">,dep_id=#{depId}</if>
            <if test="depName != null ">,dep_name=#{depName}</if>
            <if test="orgId != null ">,org_id=#{orgId}</if>
            <if test="parentId != null ">,parent_id=#{parentId}</if>
            <if test="dr != null ">,dr=#{dr}</if>
            <if test="createDt != null ">,create_dt=#{createDt}</if>
            <if test="createBy != null ">,create_by=#{createBy}</if>
            <if test="modifyDt != null ">,modify_dt=#{modifyDt}</if>
            <if test="modifyBy != null ">,modify_by=#{modifyBy}</if>
        </trim>
        WHERE DEP_ID=#{depId}
    </update>

    <!-- 删除记录 -->
    <delete id="DeleteBD_DEPARTMENT">DELETE FROM CM_DEPARTMENT WHERE DEP_ID=#{depId}</delete>
    <!-- 组织架构 列表总数-->
    <select id="CountFindAllBD_DEPARTMENT" resultType="java.lang.Integer">SELECT count(1) as value FROM CM_DEPARTMENT</select>
    <select id="CountBD_DEPARTMENT" resultType="java.lang.Integer">SELECT count(1) as value FROM CM_DEPARTMENT WHERE DEP_ID=#{depId}</select>
    <!-- 根据id查询 组织架构 -->
    <select id="FindByPK" resultMap="result_map_BD_DEPARTMENT" parameterType="Object">SELECT <include refid="Base_Column_List" /> FROM CM_DEPARTMENT WHERE DEP_ID=#{depId}</select>

    <!-- 根据各字段条件带模糊查询  组织架构 -->
    <select id="FreeFindBD_DEPARTMENT" resultMap="result_map_BD_DEPARTMENT" parameterType="Object">
        SELECT <include refid="Base_Column_List" /> FROM CM_DEPARTMENT
        <include refid="Example_Where_Clause2" />
    </select>
    <!-- 根据各字段条件带模糊查询  组织架构 记录数 -->
    <select id="CountFreeFindBD_DEPARTMENT" resultType="java.lang.Integer">
        SELECT count(1) as value FROM CM_DEPARTMENT
        <include refid="Example_Where_Clause2" />
    </select>
    <!-- 根据各字段条件带排序  组织架构 -->
    <select id="FreeFindBD_DEPARTMENTOrdered" resultMap="result_map_BD_DEPARTMENT" parameterType="Object">
        SELECT <include refid="Base_Column_List" /> FROM CM_DEPARTMENT
        <include refid="Example_Where_Clause2" />
        ORDER BY ${_orderBy}
    </select>

    <!-- *****************************  温馨提示：  ***************************** -->
    <!-- **                                                                    ** -->
    <!-- ** 以上为自动生成代码，请勿改动或删除。如有新sql添加请在下方区域内填写** -->
    <!-- **                                             ** 2016/07/22 11:03:55 ** -->
    <!-- ************************************************************************ -->


    <!-- 根据各字段条件带排序  组织架构 -->
    <select id="FindBD_DEPARTMENTByIdAndOrg" resultMap="result_map_BD_DEPARTMENT" parameterType="Object">
        SELECT <include refid="Base_Column_List" /> FROM CM_DEPARTMENT
        WHERE dep_id = #{depId} and org_id = #{orgId} and dr = 0
    </select>

</mapper>
