<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="BS_QUESTION_ANSWER">
	<!-- Result Map -->
	<resultMap id="result_map_BS_QUESTION_ANSWER" type="com.xfs.base.model.BsQuestionAnswer">
		<result column="id" property="id" />
		<result column="question_id" property="questionId" />
		<result column="answer_name" property="answerName" />
		<result column="state" property="state" />
		<result column="create_by" property="createBy" />
		<result column="create_dt" property="createDt" />
		<result column="modify_by" property="modifyBy" />
		<result column="modify_dt" property="modifyDt" />
		<result column="dr" property="dr" />
		<result column="sort_number" property="sortNumber" />
	</resultMap>

	<!-- bs_question_answer table all fields -->
	<sql id="Base_Column_List">
		id,question_id,answer_name,state,create_by,create_dt,modify_by,modify_dt,dr,sort_number
	</sql>

	<!-- 查询条件 -->
	<sql id="Example_Where_Clause">
		<trim prefix=" WHERE " prefixOverrides="AND ">
			<if test="id != null">and id = #{id}</if>
			<if test="questionId != null">and question_id = #{questionId}</if>
			<if test="answerName != null">and answer_name = #{answerName}</if>
			<if test="state != null">and state = #{state}</if>
			<if test="createBy != null">and create_by = #{createBy}</if>
			<if test="createDt != null">and create_dt = #{createDt}</if>
			<if test="modifyBy != null">and modify_by = #{modifyBy}</if>
			<if test="modifyDt != null">and modify_dt = #{modifyDt}</if>
			<if test="dr != null">and dr = #{dr}</if>
			<if test="sortNumber != null">and sort_number = #{sortNumber}</if>
		</trim>
	</sql>

	<!-- 查询条件 带模糊查询 以及 时间起始查询 -->
	<sql id="Example_Where_Clause2">
		<trim prefix=" WHERE " prefixOverrides="AND ">
			<if test="id != null">AND id = #{id}</if>
			<if test="questionId != null">AND question_id = #{questionId}</if>
			<if test="answerName != null">AND answer_name like '%${answerName}%'</if>
			<if test="answerNameEq != null">AND answer_name = #{answerNameEq}</if>
			<if test="state != null">AND state like '%${state}%'</if>
			<if test="stateEq != null">AND state = #{stateEq}</if>
			<if test="createBy != null">AND create_by = #{createBy}</if>
			<if test="createDt != null">AND create_dt = #{createDt}</if>
			<if test="createDtFrom != null">AND create_dt&gt;=#{createDtFrom}</if>
			<if test="createDtTo != null">AND create_dt&lt;=#{createDtTo}</if>
			<if test="modifyBy != null">AND modify_by = #{modifyBy}</if>
			<if test="modifyDt != null">AND modify_dt = #{modifyDt}</if>
			<if test="modifyDtFrom != null">AND modify_dt&gt;=#{modifyDtFrom}</if>
			<if test="modifyDtTo != null">AND modify_dt&lt;=#{modifyDtTo}</if>
			<if test="dr != null">AND dr = #{dr}</if>
			<if test="sortNumber != null">AND sort_number = #{sortNumber}</if>
		</trim>
	</sql>

	<!-- 插入记录 -->
	<insert id="InsertBS_QUESTION_ANSWER" parameterType="Object">
		INSERT INTO BS_QUESTION_ANSWER (
		<trim prefix=" " prefixOverrides=",">
			<if test="id != null ">,id</if>
			<if test="questionId != null ">,question_id</if>
			<if test="answerName != null ">,answer_name</if>
			<if test="state != null ">,state</if>
			<if test="createBy != null ">,create_by</if>
			<if test="createDt != null ">,create_dt</if>
			<if test="modifyBy != null ">,modify_by</if>
			<if test="modifyDt != null ">,modify_dt</if>
			<if test="dr != null ">,dr</if>
			<if test="sortNumber != null ">,sort_number</if>
		</trim>
		) VALUES (
		<trim prefix=" " prefixOverrides=",">
			<if test="id != null ">,#{id}</if>
			<if test="questionId != null ">,#{questionId}</if>
			<if test="answerName != null ">,#{answerName}</if>
			<if test="state != null ">,#{state}</if>
			<if test="createBy != null ">,#{createBy}</if>
			<if test="createDt != null ">,#{createDt}</if>
			<if test="modifyBy != null ">,#{modifyBy}</if>
			<if test="modifyDt != null ">,#{modifyDt}</if>
			<if test="dr != null ">,#{dr}</if>
			<if test="sortNumber != null ">,#{sortNumber}</if>
		</trim>
		)
		<selectKey resultType="java.lang.Integer" order="AFTER"
			keyProperty="id">
			SELECT LAST_INSERT_ID() AS ID
		</selectKey>
	</insert>

	<!-- 根据id，修改记录 -->
	<update id="UpdateBS_QUESTION_ANSWER" parameterType="Object">
		UPDATE BS_QUESTION_ANSWER
		<trim prefix=" SET " prefixOverrides=",">
			<if test="id != null ">,id=#{id}</if>
			<if test="questionId != null ">,question_id=#{questionId}</if>
			<if test="answerName != null ">,answer_name=#{answerName}</if>
			<if test="state != null ">,state=#{state}</if>
			<if test="createBy != null ">,create_by=#{createBy}</if>
			<if test="createDt != null ">,create_dt=#{createDt}</if>
			<if test="modifyBy != null ">,modify_by=#{modifyBy}</if>
			<if test="modifyDt != null ">,modify_dt=#{modifyDt}</if>
			<if test="dr != null ">,dr=#{dr}</if>
			<if test="sortNumber != null ">,sort_number=#{sortNumber}</if>
		</trim>
		WHERE ID=#{id}
	</update>

	<!-- 删除记录 -->
	<delete id="DeleteBS_QUESTION_ANSWER">DELETE FROM BS_QUESTION_ANSWER WHERE ID=#{id}
	</delete>
	<!-- 问卷答案 列表总数 -->
	<select id="CountFindAllBS_QUESTION_ANSWER" resultType="java.lang.Integer">SELECT
		count(1) as value FROM BS_QUESTION_ANSWER</select>
	<select id="CountBS_QUESTION_ANSWER" resultType="java.lang.Integer">SELECT count(1)
		as value FROM BS_QUESTION_ANSWER WHERE ID=#{id}</select>
	<!-- 根据id查询 问卷答案 -->
	<select id="FindByPK" resultMap="result_map_BS_QUESTION_ANSWER"
		parameterType="Object">
		SELECT
		<include refid="Base_Column_List" />
		FROM BS_QUESTION_ANSWER WHERE ID=#{id}
	</select>

	<!-- 根据各字段条件带模糊查询 问卷答案 -->
	<select id="FreeFindBS_QUESTION_ANSWER" resultMap="result_map_BS_QUESTION_ANSWER"
		parameterType="Object">
		SELECT
		<include refid="Base_Column_List" />
		FROM BS_QUESTION_ANSWER
		<include refid="Example_Where_Clause2" />
	</select>
	<!-- 根据各字段条件带模糊查询 问卷答案 记录数 -->
	<select id="CountFreeFindBS_QUESTION_ANSWER" resultType="java.lang.Integer">
		SELECT count(1) as value FROM BS_QUESTION_ANSWER
		<include refid="Example_Where_Clause2" />
	</select>
	<!-- 根据各字段条件带排序 问卷答案 -->
	<select id="FreeFindBS_QUESTION_ANSWEROrdered" resultMap="result_map_BS_QUESTION_ANSWER"
		parameterType="Object">
		SELECT
		<include refid="Base_Column_List" />
		FROM BS_QUESTION_ANSWER
		<include refid="Example_Where_Clause2" />
		ORDER BY ${_orderBy}
	</select>

	<!-- ***************************** 温馨提示： ***************************** -->
	<!-- ** ** -->
	<!-- ** 以上为自动生成代码，请勿改动或删除。如有新sql添加请在下方区域内填写** -->
	<!-- ** ** 2016/08/23 14:33:28 ** -->
	<!-- ************************************************************************ -->

	<select id="FreeFindASNWER" resultType="java.util.Map"
		parameterType="Object">
		SELECT question_id,an.id AS aid,qu.question_name,an.answer_name,an.state
		FROM bs_question AS qu,
		bs_question_answer AS an
		WHERE qu.id = an.question_id
		<if test="questionId != null">AND question_id = #{questionId}</if>
		<if test="answerName != null">AND answer_name like '%${answerName}%'</if>
		<if test="state != null ">AND an.state=#{state}</if>
	</select>
	
	<select id="FreeFindASNWERCount" resultType="java.lang.Integer"
		parameterType="Object">
		SELECT count(1)
		FROM bs_question AS qu,
		bs_question_answer AS an
		WHERE qu.id = an.question_id
		<if test="questionId != null">AND question_id = #{questionId}</if>
		<if test="answerName != null">AND answer_name like '%${answerName}%'</if>
		<if test="state != null ">AND an.state=#{state}</if>
	</select>

</mapper>   
