<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="MOON_USER" >
	<!-- Result Map-->
	<resultMap id="result_map_MOON_USER" type="com.xfs.activity.model.MoonUser" >
		<result column="id" property="id"/>
		<result column="phone" property="phone"/>
		<result column="picture" property="picture"/>
		<result column="company" property="company"/>
		<result column="username" property="username"/>
		<result column="password" property="password"/>
		<result column="remark" property="remark"/>
		<result column="state" property="state"/>
		<result column="create_dt" property="createDt"/>
		<result column="create_by" property="createBy"/>
		<result column="modify_dt" property="modifyDt"/>
		<result column="modify_by" property="modifyBy"/>
	</resultMap>

	<!-- moon_user table all fields -->
	<sql id="Base_Column_List" >
		id,phone,picture,company,username,password,remark,state,create_dt,create_by,modify_dt,modify_by
	</sql>

	<!-- 查询条件 -->
	<sql id="Example_Where_Clause">
		<trim prefix=" WHERE " prefixOverrides="AND ">
			<if test="id != null" >and id = #{id}</if>
			<if test="phone != null" >and phone = #{phone}</if>
			<if test="picture != null" >and picture = #{picture}</if>
			<if test="company != null" >and company = #{company}</if>
			<if test="username != null" >and username = #{username}</if>
			<if test="password != null" >and password = #{password}</if>
			<if test="remark != null" >and remark = #{remark}</if>
			<if test="state != null" >and state = #{state}</if>
			<if test="createDt != null" >and create_dt = #{createDt}</if>
			<if test="createBy != null" >and create_by = #{createBy}</if>
			<if test="modifyDt != null" >and modify_dt = #{modifyDt}</if>
			<if test="modifyBy != null" >and modify_by = #{modifyBy}</if>
		</trim>
	</sql>

	<!-- 查询条件 带模糊查询 以及 时间起始查询 -->
	<sql id="Example_Where_Clause2">
		<trim prefix=" WHERE " prefixOverrides="AND ">
			<if test="id != null">AND id like '%${id}%'</if>
			<if test="phone != null">AND phone like '%${phone}%'</if>
			<if test="phoneEq != null">AND phone = #{phoneEq}</if>
			<if test="picture != null">AND picture like '%${picture}%'</if>
			<if test="pictureEq != null">AND picture = #{pictureEq}</if>
			<if test="company != null">AND company like '%${company}%'</if>
			<if test="companyEq != null">AND company = #{companyEq}</if>
			<if test="username != null">AND username like '%${username}%'</if>
			<if test="usernameEq != null">AND username = #{usernameEq}</if>
			<if test="password != null">AND password like '%${password}%'</if>
			<if test="passwordEq != null">AND password = #{passwordEq}</if>
			<if test="remark != null">AND remark like '%${remark}%'</if>
			<if test="remarkEq != null">AND remark = #{remarkEq}</if>
			<if test="state != null">AND state like '%${state}%'</if>
			<if test="stateEq != null">AND state = #{stateEq}</if>
			<if test="createDt != null">AND create_dt = #{createDt}</if>
			<if test="createDtFrom != null">AND create_dt&gt;=#{createDtFrom}</if>
			<if test="createDtTo != null">AND create_dt&lt;=#{createDtTo}</if>
			<if test="createBy != null">AND create_by like '%${createBy}%'</if>
			<if test="createByEq != null">AND create_by = #{createByEq}</if>
			<if test="modifyDt != null">AND modify_dt = #{modifyDt}</if>
			<if test="modifyDtFrom != null">AND modify_dt&gt;=#{modifyDtFrom}</if>
			<if test="modifyDtTo != null">AND modify_dt&lt;=#{modifyDtTo}</if>
			<if test="modifyBy != null">AND modify_by like '%${modifyBy}%'</if>
			<if test="modifyByEq != null">AND modify_by = #{modifyByEq}</if>
		</trim>
	</sql>

	<!-- 插入记录 -->
	<insert id="InsertMOON_USER" parameterType="Object" >
		INSERT INTO MOON_USER (
		<trim prefix=" " prefixOverrides=",">
			<if test="id != null ">,id</if>
			<if test="phone != null ">,phone</if>
			<if test="picture != null ">,picture</if>
			<if test="company != null ">,company</if>
			<if test="username != null ">,username</if>
			<if test="password != null ">,password</if>
			<if test="remark != null ">,remark</if>
			<if test="state != null ">,state</if>
			<if test="createDt != null ">,create_dt</if>
			<if test="createBy != null ">,create_by</if>
			<if test="modifyDt != null ">,modify_dt</if>
			<if test="modifyBy != null ">,modify_by</if>
		</trim>
		)  VALUES (
		<trim prefix=" " prefixOverrides=",">
			<if test="id != null ">,#{id}</if>
			<if test="phone != null ">,#{phone}</if>
			<if test="picture != null ">,#{picture}</if>
			<if test="company != null ">,#{company}</if>
			<if test="username != null ">,#{username}</if>
			<if test="password != null ">,#{password}</if>
			<if test="remark != null ">,#{remark}</if>
			<if test="state != null ">,#{state}</if>
			<if test="createDt != null ">,#{createDt}</if>
			<if test="createBy != null ">,#{createBy}</if>
			<if test="modifyDt != null ">,#{modifyDt}</if>
			<if test="modifyBy != null ">,#{modifyBy}</if>
		</trim>
		)
		<selectKey resultType="java.lang.Integer" order="AFTER" keyProperty="id">
			SELECT LAST_INSERT_ID() AS ID
		</selectKey>
	</insert>

	<!-- 根据id，修改记录-->
	<update id="UpdateMOON_USER" parameterType="Object" >
		UPDATE MOON_USER
		<trim prefix=" SET " prefixOverrides=",">
			<if test="id != null ">,id=#{id}</if>
			<if test="phone != null ">,phone=#{phone}</if>
			<if test="picture != null ">,picture=#{picture}</if>
			<if test="company != null ">,company=#{company}</if>
			<if test="username != null ">,username=#{username}</if>
			<if test="password != null ">,password=#{password}</if>
			<if test="remark != null ">,remark=#{remark}</if>
			<if test="state != null ">,state=#{state}</if>
			<if test="createDt != null ">,create_dt=#{createDt}</if>
			<if test="createBy != null ">,create_by=#{createBy}</if>
			<if test="modifyDt != null ">,modify_dt=#{modifyDt}</if>
			<if test="modifyBy != null ">,modify_by=#{modifyBy}</if>
		</trim>
		WHERE ID=#{id}
	</update>

	<!-- 删除记录 -->
	<delete id="DeleteMOON_USER">DELETE FROM MOON_USER WHERE ID=#{id}</delete>
	<!-- 用户表 列表总数-->
	<select id="CountFindAllMOON_USER" resultType="java.lang.Integer">SELECT count(1) as value FROM MOON_USER</select>
	<select id="CountMOON_USER" resultType="java.lang.Integer">SELECT count(1) as value FROM MOON_USER WHERE ID=#{id}</select>
	<!-- 根据id查询 用户表 -->
	<select id="FindByPK" resultMap="result_map_MOON_USER" parameterType="Object">SELECT <include refid="Base_Column_List" /> FROM MOON_USER WHERE ID=#{id}</select>

	<!-- 根据各字段条件带模糊查询  用户表 -->
	<select id="FreeFindMOON_USER" resultMap="flow_result_map_MOON_USER" parameterType="Object">
		SELECT <include refid="Base_Column_List" /> FROM MOON_USER
		<include refid="Example_Where_Clause2" />
	</select>
	<!-- 根据各字段条件带模糊查询  用户表 记录数 -->
	<select id="CountFreeFindMOON_USER" resultType="java.lang.Integer">
		SELECT count(1) as value FROM MOON_USER
		<include refid="Example_Where_Clause2" />
	</select>
	<!-- 根据各字段条件带排序  用户表 -->
	<select id="FreeFindMOON_USEROrdered" resultMap="result_map_MOON_USER" parameterType="Object">
		SELECT <include refid="Base_Column_List" /> FROM MOON_USER
		<include refid="Example_Where_Clause2" />
		ORDER BY ${_orderBy}
	</select>

	<!-- *****************************  温馨提示：  ***************************** -->
	<!-- **                                                                    ** -->
	<!-- ** 以上为自动生成代码，请勿改动或删除。如有新sql添加请在下方区域内填写** -->
	<!-- **                                             ** 2016/09/06 11:20:20 ** -->
	<!-- ************************************************************************ -->
	<!--<update id="UpdateShareNum" parameterType="Object" >
            UPDATE MOON_USER  SET  share_num=share_num+1 WHERE ID=#{id}
        </update>

        <select id="QueryPic" parameterType="Object" >
            SELECT picture from MOON_USER WHERE  ID=#{id}
        </select>-->


	<update id="UpdateUserState" parameterType="Object" >
		UPDATE MOON_USER  SET  state='AUDUTED' WHERE ID=#{id};
	</update>

	<!-- Result Map-->
	<resultMap id="flow_result_map_MOON_USER" type="com.xfs.activity.model.MoonUser" >
		<result column="id" property="id"/>
		<result column="phone" property="phone"/>
		<result column="picture" property="picture"/>
		<result column="company" property="company"/>
		<result column="username" property="username"/>
		<result column="password" property="password"/>
		<result column="remark" property="remark"/>
		<result column="state" property="state"/>
		<result column="create_dt" property="createDt"/>
		<result column="create_by" property="createBy"/>
		<result column="modify_dt" property="modifyDt"/>
		<result column="modify_by" property="modifyBy"/>
		<collection property="moonUserTicket" column="{userId=id}" ofType="MoonUserTicket" select="MOON_USER_TICKET.FindByUserId" />
	</resultMap>

	<update id="UpdateRemark" parameterType="Object" >
		UPDATE MOON_USER  SET  remark='true' WHERE phone=#{phone};
	</update>
</mapper>   
