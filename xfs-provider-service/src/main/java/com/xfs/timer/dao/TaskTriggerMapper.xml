<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="TASK_TRIGGER">
	<resultMap id="result_map_BD_TASK_TRIGGER" type="com.xfs.timer.model.TaskTrigger">
		<result column="id" property="id" />
		<result column="trigger_name" property="triggerName" />
		<result column="trigger_code" property="triggerCode" />
		<result column="trigger_group" property="triggerGroup" />
		<result column="trigger_type" property="triggerType" />
		<result column="start_time" property="startTime" />
		<result column="end_time" property="endTime" />
		<result column="repeat_interval" property="repeatInterval" />
		<result column="interval_type" property="intervalType" />
		<result column="repeat_count" property="repeatCount" />
		<result column="cron_express" property="cronExpress" />
		<result column="creat_by" property="creatBy" />
		<result column="creat_dt" property="creatDt" />
		<result column="modify_by" property="modifyBy" />
		<result column="modify_dt" property="modifyDt" />
		<result column="dr" property="dr" />
		<result column="job_id" property="jobId" />
	</resultMap>
	<sql id="Trigger_Base_Column_List">
		id,trigger_name,trigger_code,trigger_group,job_id,trigger_type,start_time,end_time,repeat_interval,interval_type,repeat_count,cron_express,creat_by,creat_dt,modify_by,modify_dt,dr
	</sql>
	<!-- 查询条件 -->
	<sql id="Example_Where_Clause">
		<trim prefix=" WHERE " prefixOverrides="AND ">
			<if test="id != null">and id = #{id}</if>
			<if test="triggerName != null">and trigger_name = #{triggerName}</if>
			<if test="triggerCode != null">and trigger_code = #{triggerCode}</if>
			<if test="triggerGroup != null">and trigger_group =
				#{triggerGroup}
			</if>
			<if test="jobId != null">and job_id = #{jobId}</if>
			<if test="triggerType != null">and trigger_type = #{triggerType}</if>
			<if test="startTime != null">and start_time = #{startTime}</if>
			<if test="endTime != null">and end_time = #{endTime}</if>
			<if test="repeatInterval != null">and repeat_interval =
				#{repeatInterval}
			</if>
			<if test="intervalType != null">and interval_type =
				#{intervalType}
			</if>
			<if test="repeatCount != null">and repeat_count = #{repeatCount}</if>
			<if test="cronExpress != null">and cron_express = #{cronExpress}</if>
			<if test="creatBy != null">and creat_by = #{creatBy}</if>
			<if test="creatDt != null">and creat_dt = #{creatDt}</if>
			<if test="modifyBy != null">and modify_by = #{modifyBy}</if>
			<if test="modifyDt != null">and modify_dt = #{modifyDt}</if>
			<if test="dr != null">and dr = #{dr}</if>
		</trim>
	</sql>

	<!-- 根据条件查询所有触发器 -->
	<select id="GetTaskTriggerList" resultMap="result_map_BD_TASK_TRIGGER"
		parameterType="Object">
		SELECT
		<include refid="Trigger_Base_Column_List" />
		FROM BD_TASK_TRIGGER
		<include refid="Example_Where_Clause" />
	</select>
	<!-- 根据条件查询触发器个数 -->
	<select id="CountTaskTrigger" resultType="java.lang.Integer"
		parameterType="Object">
		SELECT
		count(1)
		FROM BD_TASK_TRIGGER
		<include refid="Example_Where_Clause" />
	</select>

	<!-- 根据定时任务Id获得定时任务触发器基本信息 -->
	<select id="GetTaskTriggerById" resultMap="result_map_BD_TASK_TRIGGER"
		parameterType="Object">
		SELECT
		<include refid="Trigger_Base_Column_List" />
		FROM BD_TASK_TRIGGER
		WHERE ID=#{id}
	</select>

	<!-- 插入触发器 -->
	<insert id="AddTaskTrigger" parameterType="Object">
		INSERT INTO BD_TASK_TRIGGER (
		<trim prefix=" " prefixOverrides=",">
			<if test="id != null ">,id</if>
			<if test="triggerName != null ">,trigger_name</if>
			<if test="triggerCode != null ">,trigger_code</if>
			<if test="triggerGroup != null ">,trigger_group</if>
			<if test="jobId != null">,job_id</if>
			<if test="triggerType != null ">,trigger_type</if>
			<if test="startTime != null ">,start_time</if>
			<if test="endTime != null ">,end_time</if>
			<if test="repeatInterval != null ">,repeat_interval</if>
			<if test="intervalType != null ">,interval_type</if>
			<if test="repeatCount != null ">,repeat_count</if>
			<if test="cronExpress != null ">,cron_express</if>
			<if test="creatBy != null ">,creat_by</if>
			<if test="creatDt != null ">,creat_dt</if>
			<if test="modifyBy != null ">,modify_by</if>
			<if test="modifyDt != null ">,modify_dt</if>
			<if test="dr != null ">,dr</if>
		</trim>
		) VALUES (
		<trim prefix=" " prefixOverrides=",">
			<if test="id != null ">,#{id}</if>
			<if test="triggerName != null ">,#{triggerName}</if>
			<if test="triggerCode != null ">,#{triggerCode}</if>
			<if test="triggerGroup != null ">,#{triggerGroup}</if>
			<if test="jobId != null">,#{jobId}</if>
			<if test="triggerType != null ">,#{triggerType}</if>
			<if test="startTime != null ">,#{startTime}</if>
			<if test="endTime != null ">,#{endTime}</if>
			<if test="repeatInterval != null ">,#{repeatInterval}</if>
			<if test="intervalType != null ">,#{intervalType}</if>
			<if test="repeatCount != null ">,#{repeatCount}</if>
			<if test="cronExpress != null ">,#{cronExpress}</if>
			<if test="creatBy != null ">,#{creatBy}</if>
			<if test="creatDt != null ">,#{creatDt}</if>
			<if test="modifyBy != null ">,#{modifyBy}</if>
			<if test="modifyDt != null ">,#{modifyDt}</if>
			<if test="dr != null ">,#{dr}</if>
		</trim>
		)
	</insert>
	<!-- 删除记录 -->
	<delete id="DeleteTaskTrgger">DELETE FROM BD_TASK_TRIGGER WHERE ID=#{id}</delete>
	<!-- 根据id，修改记录 -->
	<update id="UpdateTaskTrgger" parameterType="Object">
		UPDATE BD_TASK_TRIGGER
		<trim prefix=" SET " prefixOverrides=",">
			<if test="id != null ">,id=#{id}</if>
			<if test="triggerName != null ">,trigger_name=#{triggerName}</if>
			<if test="triggerCode != null ">,trigger_code=#{triggerCode}</if>
			<if test="triggerGroup != null ">,trigger_group=#{triggerGroup}</if>
			<if test="jobId != null">,job_id=#{jobId}</if>
			<if test="triggerType != null ">,trigger_type=#{triggerType}</if>
			<if test="startTime != null ">,start_time=#{startTime}</if>
			<if test="endTime != null ">,end_time=#{endTime}</if>
			<if test="repeatInterval != null ">,repeat_interval=#{repeatInterval}</if>
			<if test="intervalType != null ">,interval_type=#{intervalType}</if>
			<if test="repeatCount != null ">,repeat_count=#{repeatCount}</if>
			<if test="cronExpress != null ">,cron_express=#{cronExpress}</if>
			<if test="creatBy != null ">,creat_by=#{creatBy}</if>
			<if test="creatDt != null ">,creat_dt=#{creatDt}</if>
			<if test="modifyBy != null ">,modify_by=#{modifyBy}</if>
			<if test="modifyDt != null ">,modify_dt=#{modifyDt}</if>
			<if test="dr != null ">,dr=#{dr}</if>
		</trim>
		WHERE ID=#{id}
	</update>
</mapper>   
